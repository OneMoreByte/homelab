apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: minecraft-greg
spec:
  interval: 1h
  timeout: 15m
  chartRef:
    kind: OCIRepository
    name: minecraft-greg
  install:
    remediation:
      retries: -1
  upgrade:
    cleanupOnFail: true
    remediation:
      retries: 3
  values:
    image:
      repository: itzg/minecraft-server
    replicaCount: 1
    resources:
      requests:
        memory: 4Gi
        cpu: 4
    strategyType: Recreate
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
            - matchExpressions:
                - key: app
                  operator: In
                  values:
                    - fastclock

    securityContext:
      runAsUser: 1000
      fsGroup: 2000

    sidecarContainers: []
    extraVolumes: []
    minecraftServer:
      eula: "TRUE"
      version: 1.7.10
      type: FORGE
      forgeVersion: "10.13.4.1614"
      fabricVersion: ""
      spongeVersion: null
      forgeInstallerUrl: null
      bukkitDownloadUrl: null
      spigotDownloadUrl: null
      paperDownloadUrl: null
      ftbModpackId: null
      ftbModpackVersionId: null
      cfServerMod: null
      ftbLegacyJavaFixer: false
      difficulty: normal
      whitelist: null
      ops: OneMoreByte
      icon: null
      maxPlayers: 1337
      maxWorldSize: 10000
      allowNether: true
      announcePlayerAchievements: false
      enableCommandBlock: true
      forcegameMode: false
      generateStructures: true
      hardcore: false
      maxBuildHeight: 256
      maxTickTime: 60000
      spawnAnimals: true
      spawnMonsters: true
      spawnNPCs: true
      spawnProtection: 0
      viewDistance: 10
      levelSeed: null
      gameMode: survival
      motd: wack
      pvp: true
      levelType: DEFAULT
      generatorSettings: null
      worldSaveName: world
      downloadWorldUrl: null
      forceReDownload: false
      downloadModpackUrl: "https://downloads.gtnewhorizons.com/ServerPacks/GT_New_Horizons_2.8.4_Server_Java_17-25.zip"
      removeOldMods: false
      vanillaTweaksShareCodes: []
      resourcePackUrl: null
      resourcePackSha: null
      resourcePackEnforce: false
      onlineMode: true
      memory: 4G
      jvmOpts: ""
      jvmXXOpts: ""
      overrideServerProperties: true
      serviceAnnotations: {}
      serviceType: LoadBalancer
      nodePort: null
      servicePort: 25565
      clusterIP: null
      loadBalancerIP: null
      externalIPs: null
      spigetResources: []
      rcon:
        enabled: false
        port: 25575
        password: whydoIneedthiswowee
        existingSecret: null
        secretKey: rcon-password
        serviceType: ClusterIP
        nodePort: null
        clusterIP: null
        loadBalancerIP: null
      extraPorts: []
      query:
        enabled: false
        port: 25565
    extraEnv:
      USE_AIKAR_FLAGS: "true"
    envFrom: []
    persistence:
      annotations: {}
      dataDir:
        enabled: true
        Size: 32Gi
    podAnnotations: {}
    deploymentAnnotations: {}
    serviceAnnotations:
      mc-router.itzg.me/externalServerName: gregory.jackhil.de
    rconServiceAnnotations: {}
    mcbackup:
      enabled: false

