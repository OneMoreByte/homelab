nginx:
  serverBlock: |-
    server {
      server_name roms;
      listen 8080;
      root /roms;

      location / {
        autoindex on;
        sendfile   on;
        tcp_nopush on;
        tcp_nodelay       on;
        keepalive_timeout 65;
      }  
    }
  containerPorts:
    http: 8080
  service:
    type: NodePort
  extraVolumes:
  - name: roms-dir
    hostPath:
      path: /store/roms
      type: Directory
  extraVolumeMounts:
  - name: roms-dir
    mountPath: /roms
    readOnly: true
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: app
            operator: In
            values:
            - bulk-datastore

ingress:
  enabled: true
  annotations:
    traefik.ingress.kubernetes.io/router.tls: "true"
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.middlewares: traefik-tuner-basicauth@kubernetescrd
  labels: {}
  hosts:
    - host: roms.jackhil.de
      paths:
        - path: /
          pathType: Prefix
  tls:
  - hosts:
      - roms.jackhil.de
    secretName: jackhil.de-cert
