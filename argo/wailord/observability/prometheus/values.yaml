kube-prometheus-stack:
  grafana:
    enabled: false

  prometheus:
    prometheusSpec:
      storageSpec:
        emptyDir: {}
      thanos:
        objectStorageConfig:
          existingSecret:
            name: thanos-s3-config
            key: objstore.yml
      additionalScrapeConfigs: []

    thanosService:
      enabled: true
      clusterIP: ""
    thanosServiceMonitor:
      enabled: true
    thanosIngress:
      enabled: false
      ingressClassName: tailscale
      labels:
        tailscale.com/proxy-class: "jscknet"
      hosts:
        - thanos
      paths:
        - /
      pathType: ImplementationSpecific
      tls:
        - hosts:
            - thanos

thanos:
  commonLabels:
   tailscale.com/proxy-class: "jscknet"

  existingObjstoreSecret: thanos-s3-config

  query:
    dnsDiscovery:
      sidecarsService: "prometheus-operated"

  compactor:
    enabled: true

  storegateway:
    enabled: true

  metrics:
    enabled: true
    serviceMonitor:
      enabled: true

  queryFrontend:
    ingress:
      enabled: true
      hostname: thanos
      tls: true
      ingressClassName: tailscale
