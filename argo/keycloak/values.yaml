
keycloak:
  # This is an example configuration, for production grade configuration see the Keycloak documentation.
  # See https://www.keycloak.org/server/configuration
  # See https://www.keycloak.org/server/all-config
  command:
    - "/opt/keycloak/bin/kc.sh"
    - "--verbose"
    - "start"
    - "--auto-build"
    - "--http-enabled=true"
    - "--http-port=8080"
    - "--hostname-strict=false"
    - "--hostname-strict-https=false"
    - "--spi-events-listener-jboss-logging-success-level=info"
    - "--spi-events-listener-jboss-logging-error-level=warn"

  extraEnv: |
    - name: KEYCLOAK_ADMIN
      value: admin
    - name: KEYCLOAK_ADMIN_PASSWORD
      value: "hoPma7Zn&keVh*cA4*JSX!mT#!YnmM!h"
    - name: JAVA_OPTS_APPEND
      value: >-
        -XX:+UseContainerSupport
        -XX:MaxRAMPercentage=50.0
        -Djava.awt.headless=true
        -Djgroups.dns.query={{ include "keycloak.fullname" . }}-headless
  dbchecker:
    enabled: true

  database:
    vendor: postgres
    hostname: keycloak-db-postgresql
    port: 5432
    username: keycloak
    password: "uS6Bt6*R7fjskBEY@bbrVX6f%3TVvmoz"
    database: keycloak

  secrets:
    admin-creds:
      annotations:
        my-test-annotation: Test secret for {{ include "keycloak.fullname" . }}
      stringData:
        user: admin
        password: secret
postgresql:
  nameOverride: "keycloak-db-postgresql"
  global:
    postgresql:
      auth:
        username: keycloak
        password: "uS6Bt6*R7fjskBEY@bbrVX6f%3TVvmoz"
        database: keycloak